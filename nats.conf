# nats.conf
server_name: frontend-assignment-nats
port: 4222

# WebSocket configuration for frontend
websocket {
  port: 8000
  no_tls: true
  
  # Allow cross-origin for development
  same_origin: false
  
  # CORS headers for browser compatibility
  # allowed_origins: ["http://localhost:3000", "http://localhost:5173", "http://localhost:8080"]
  
  # WebSocket specific timeouts
  handshake_timeout: "2s"
  compression: true
}

# HTTP monitoring endpoint
http_port: 8222

# JetStream configuration
jetstream {
  store_dir: "/data/jetstream"
  
  # Memory limits for development
  max_memory_store: 1GB
  max_file_store: 10GB
}

# Logging configuration for development
trace: true
debug: true
logtime: true

# Connection limits (generous for development)
max_connections: 1000
max_subscriptions: 1000
max_payload: 10MB

# Ping interval to detect stale connections
ping_interval: "30s"
ping_max: 3

# Write deadline for slow consumers
write_deadline: "10s"

# JetStream enabled globally (no auth for simplicity)
jetstream: enabled